<%= stylesheet_link_tag params[:controller] %>
<%= javascript_include_tag params[:controller] %>
<%= content_for :title, @post.title %>
<%= content_for :hidden_header_navi, true %>
<div class="container">
  <div class="row">
    <div class="col-lg-10 col-lg-offset-1">
      <div class="row" >
        <div class="col-lg-10">
          <%= render partial: 'blogs/posts/title_style', object: @title %>
        </div>
        <div class="col-lg-2">
          <!-- Split button -->
          <div class="btn-group">
            <button type="button" class="btn btn-default">操作</button>
            <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span class="caret"></span>
              <span class="sr-only">Toggle Dropdown</span>
            </button>
            <ul class="dropdown-menu">
              <li><a href="<%= root_url %>">首页</a></li>
              <li><a href="<%= edit_blogs_post_path %>">修改</a></li>
              <li role="separator" class="divider"></li>
              <li><a href="#">转载</a></li>
            </ul>
          </div>
        </div>
        <div class="col-lg-14 col-lg-offset-8">

        </div>
      </div>
      <div class="col-lg-12" style="align-content: center; text-align: center; ">
        <div id="preview" class="fr-view cus_show_blog"></div>
      </div>
    </div>
  </div>

  <script>
     $(function(){
         var content_code = "<%=@post.content%>"
         var content = $('#preview').html(content_code).text();

         $('#preview').html(content);
     })
  </script>

  <div class="container">
    <div class="row blog-comments">
      <h3>评论</h3>
        <% @blog_comments.each do |comment|
        next if comment.comment_content.blank?
        %>
        <div class="col-lg-10 col-lg-offset-1 blog-comment">
          <h5 class="email"><strong><%= comment.user.email %></strong></h5>

          <h6><%= comment.created_at %></h6>
          <h5 class="louceng">＃<%= comment.id %></h5>

            <div><%= comment.comment_content %></div>
        </div>
          <% end if @blog_comments.length > 0 %>
    </div>

    <div class="row">
      <div class="col-lg-10 col-lg-offset-1">
        <div class="row">
          <div class="col-lg-12">
            <h2>发表看法：</h2>
          </div>
          <%= form_for @blog_comment, url: blogs_post_comments_path(@post), html: {class: 'comment'},
                       remote: true, data: {confirm: '确定提交此评论？', type: 'json'} do |f| %>

              <div class="col-lg-12">

                <%= f.text_area :comment_content, rows: '10', cols: '100', maxlength: '1000', placeholder: '您的看法是？' %>
              </div>
              <div class="col-lg-12">
                <input type="checkbox" name="memory" id="memory" class="memory">　<label>请尽量记住我</label>
              </div>
              <!-- data: {disable_with: 'save...'}
               其实转换为
               data-disable-with='save...'
               -->
              <%= f.submit '以上，这是我对观点', data: {disable_with: '正在提交中......'} %>
          <% end %>
        </div>

      </div>
    </div>
  </div>
</div>
<script>
$('form.comment').submit(function(){
   if($('textarea#cc').val()!=''){
       return true;
   }else{
       alert('留言不能为空！')
       return false;
   }
})
</script>